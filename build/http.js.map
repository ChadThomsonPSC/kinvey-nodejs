{"version":3,"sources":["http.js"],"names":[],"mappings":";;;;;;;;;;;AAAA;;AACA;;;;;;;;;;;;IAEa;;;AACX,WADW,cACX,GAAkD;QAAtC,6DAAO,6CAA+B;;0BADvC,gBACuC;;kEADvC,2BAEH,OAD0C;GAAlD;;eADW;;2BAKJ,SAAS;AACd,aAAO,2BANE,sDAMW,QAAb,CAAsB,IAAtB,CAA2B,YAAM;AACtC,YAAM,UAAU,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AAC/C,iCAAK;AACH,iBAAK,QAAQ,GAAR;AACL,oBAAQ,QAAQ,MAAR;AACR,qBAAS,QAAQ,OAAR;AACT,kBAAM,QAAQ,IAAR;AACN,4BAAgB,QAAQ,cAAR;WALlB,EAMG,UAAC,KAAD,EAAQ,QAAR,EAAkB,IAAlB,EAA2B;AAC5B,gBAAI,KAAJ,EAAW;AACT,kBAAI,MAAM,IAAN,KAAe,WAAf,EAA4B;AAC9B,uBAAO,OAAO,IAAI,KAAJ,CAAU,yDACtB,iEADsB,CAAjB,CAAP,CAD8B;eAAhC;;AAKA,qBAAO,OAAO,KAAP,CAAP,CANS;aAAX;;AASA,oBAAQ,QAAR,GAAmB;AACjB,0BAAY,SAAS,UAAT;AACZ,uBAAS,SAAS,OAAT;AACT,oBAAM,IAAN;aAHF,CAV4B;;AAgB5B,mBAAO,QAAQ,OAAR,CAAP,CAhB4B;WAA3B,CANH,CAD+C;SAArB,CAAtB,CADgC;AA2BtC,eAAO,OAAP,CA3BsC;OAAN,CAAlC,CADc;;;;SALL","file":"http.js","sourcesContent":["import { KinveyMiddleware } from 'kinvey-javascript-sdk-core/src/rack/middleware';\nimport http from 'request';\n\nexport class HttpMiddleware extends KinveyMiddleware {\n  constructor(name = 'Kinvey Node Http Middleware') {\n    super(name);\n  }\n\n  handle(request) {\n    return super.handle(request).then(() => {\n      const promise = new Promise((resolve, reject) => {\n        http({\n          url: request.url,\n          method: request.method,\n          headers: request.headers,\n          body: request.data,\n          followRedirect: request.followRedirect\n        }, (error, response, body) => {\n          if (error) {\n            if (error.code === 'ENOTFOUND') {\n              return reject(new Error('It looks like you do not have a network connection. ' +\n                'Please check that you are connected to a network and try again.'));\n            }\n\n            return reject(error);\n          }\n\n          request.response = {\n            statusCode: response.statusCode,\n            headers: response.headers,\n            data: body\n          };\n\n          return resolve(request);\n        });\n      });\n      return promise;\n    });\n  }\n}\n"],"sourceRoot":"/source/"}